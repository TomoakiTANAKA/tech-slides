---
marp: true
theme: default
header: "**勉強会資料** __僕の考えるユニットテストとの程よい付き合い方__"
footer: "by [TomoakiTANAKA](tanaka1987＠gmail.com)"
paginate: true
---

<style>
img[alt~="center"] {
  display: block;
  margin: 0 auto;
}

</style>

# 僕の考えるユニットテストとのほどよい付き合い方

## 2022/02/xx TomoakiTANAKA

---

# 自己紹介

---

# 田中智章

![bg right](assets/images/tomioka_silk.png)

- 富岡市出身
- SE としてキャリアを始め、現在は事業会社勤務
- 主に Web開発 を担当、時々アプリ開発（Rails や Flutter）
- 好きなお酒はウィスキー全般、あと LEGO が好き

---

# 会社紹介

---

# 株式会社エバーセンス

![bg right](assets/images/eversense_logo.jpg)

## Vision

- 家族を幸せにすることで、笑顔溢れる社会をつくる。

## Products

- 妊婦さんへの情報提供をする「ninaru」
- 子育てに必要な情報や機能満載の育児アプリ「ninaru baby」

---

# 本日の勉強会について

---

# 本日の勉強会について

スピーカーのユニットテストに関する考えや知見をお話します（経験談）。

<br>
また、かんたんに僕（及び周辺）で実践している内容も紹介します。
明日からのユニットテストに何か活かせるものをお話できればと思っています。

<br>
対象
- 単体テスト書いていない人
- テストをかく意味がわからない人
- どういうときに書けばいいか迷う人

---

# 目次

---

# 目次

1. ユニットテストとは？
2. テストコードの事例紹介
3. いつユニットテストをするのか？
4. どこまでテストコードを書くのか？
5. 田中とテストの歴史
6. まとめ

※ 組織の意見でなく、個人の意見です

---

# ユニットテストとは？

---

- Q. みなさんにもユニットテストってどう思う？くらいのライトな問いかけしつつ、アイスブレイク
- ユニットテストの定義（田中の考え）を話す

---

# テストコードの事例紹介

---

- 助けられた実例を紹介する + コードもセットで説明
- 参加者の人にもこういうテストがあって助かった、逆に困った、といった内容を聞きたい

- 事例
  - Railsのupdate時に仕様変更を検知できた
  - 日付の計算処理（生まれて何日目、とか。今日は何回目の日曜日、とか）
  - アプリポップアップの発火処理
    - 直接shapredPrefを参照する -> UserPropertyモデルを作成、1つレイヤーを挟むことでテストしやすくする（もちろんSharedPrefはテストでも参照できるけど）

---

# いつユニットテストをするのか？

---

- よくあるお悩み（自分もよく思う）に田中の考えを説明する

- いつ書くか？
  - 入力条件が複雑で手動で確認するのが大変なとき
  - ↑↑↑と関連するが、UIが絡むとテストしにくいとき
  - リファクタリングするとき
  - コードを書き直すとき

- いつ書かないか？
  - 入力に対する出力がシンプルな時（例：ユーザー名に「さん」をつける、だけ）
  - 行数が大きいメソッドに対して
    - テスト書くより先に、メソッドを分解するのが先

---

# どこまでテストコードを書くのか？

- よくあるお悩み（自分もよく思う）に田中の考えを説明する

- pureな部分で書くと良い
  - アプリだと画面、WebだとコントローラなどのHTTP通信部分は、難しい
  - pureな部分でテストを書こうとすると、モデルやそれに近いレイヤーが洗練される

- 目視で十分な部分なところはかかない
  - Webページがきちんと表示される、など

---

# 田中とテストの歴史

- テストコード書かないプロジェクト、新卒だったが新卒なりの色を出すため

- 影響を受けたり、役に立ったと思う資格
  - [テスト駆動開発](https://www.amazon.co.jp/dp/B077D2L69C)
    - ご存知t_wadaさんの翻訳本（KnetBeckの書籍としてもかなり有名）
  - [RSpecによるRailsテスト入門](https://leanpub.com/everydayrailsrspec-jp)
  - [JSTQB（ソフトウェアテストの資格）](http://jstqb.jp/)
    - ソフトウェア開発していればおおよそ経験する内容を網羅的にまとめている
    - 1〜3年目くらいにスキルの定着具合や抜け漏れないか確認する意味で

---

# まとめ

---

# ご清聴ありがとうございました

---

# 質疑応答

---

# おわり
